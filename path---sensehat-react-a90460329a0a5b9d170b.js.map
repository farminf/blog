{"version":3,"sources":["webpack:///path---sensehat-react-a90460329a0a5b9d170b.js","webpack:///./.cache/json/sensehat-react.json"],"names":["webpackJsonp","344","module","exports","data","markdownRemark","html","frontmatter","date","path","title","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,sj9BAA8v8BC,aAAieC,KAAA,iBAAAC,KAAA,kBAAAC,MAAA,6FAAqJC","file":"path---sensehat-react-a90460329a0a5b9d170b.js","sourcesContent":["webpackJsonp([94803894866459],{\n\n/***/ 344:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>These days the comparison between React and Angular2 is a very hot topic. I’ve seen some people build the dashboards on top of both and compare the features and basically the do pros and cons. So, I decided to the same thing for my SenseHat and see the result.</p>\\n<p>I started to implement very light and easy API server using Python on my Raspberry just to respond the calls from dashboard. It doesn’t have any database or any historic data feature, It just gives the current value of Temperature, Humidity and pressure sensor of SenseHat and additionally it accept post for showing a text on SenseHat LED or make the LED colorful (Red, Green and Blue). I did the API part using flask , a python library which is awesome. For configuring and installing it and also getting familiar with flask, I found <a href=\\\"https://blog.miguelgrinberg.com/post/designing-a-restful-api-with-python-and-flask\\\">this beautiful tutorial</a> that explains everything and helped me a lot.</p>\\n<p>I just implemented one file and you can find it on my GitHub <a href=\\\"https://github.com/farminf/sensehat-api-python\\\">HERE</a></p>\\n<p>As you can see I have implemented 3 functions to interact with my Dashboard (2 Gets and 1 Post).</p>\\n<pre><code class=\\\"language-python\\\">#!flask/bin/python\\nimport os\\nfrom flask import Flask , jsonify , request\\nfrom sense_hat import SenseHat\\nfrom flask_cors import CORS, cross_origin\\n\\n\\n\\napp = Flask(__name__)\\nCORS(app)\\n\\nsense = SenseHat()\\nsense.clear()\\n\\n\\n# get CPU temperature\\ndef get_cpu_temp():\\n  res = os.popen(\\\"vcgencmd measure_temp\\\").readline()\\n  t = float(res.replace(\\\"temp=\\\",\\\"\\\").replace(\\\"'C\\\\n\\\",\\\"\\\"))\\n  return(t)\\n\\n@app.route('/api')\\ndef index():\\n    return \\\"try with '/ambient' \\\"\\n\\n@app.route('/api/ambient', methods=['GET', 'OPTIONS'])\\ndef get_ambient_params():\\n    t1 = sense.get_temperature_from_humidity()\\n    t2 = sense.get_temperature_from_pressure()\\n    t_cpu = get_cpu_temp()\\n    t = (t1+t2)/2\\n    temperature = t - ((t_cpu-t)/1.5)\\n\\n    humidity = sense.get_humidity()\\n\\n    pressure = sense.get_pressure()\\n\\n    return jsonify({\\n        'temperature': temperature ,\\n        'humidity': humidity ,\\n        'pressure': pressure})\\n\\n@app.route('/api/led/&#x3C;rgb>', methods=['GET'])\\ndef set_led_color(rgb):\\n    if rgb == 'red':\\n        X = [255, 0, 0]  # Red\\n    elif rgb == 'green':\\n        X = [0, 255, 0]  # green\\n    elif rgb == 'blue':\\n        X = [0, 0, 255]  # blue\\n    color = [\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X\\n        ]\\n    sense.set_pixels(color)\\n    return jsonify({'success': True })\\n\\n@app.route('/api/led', methods=['POST'])\\ndef set_led_message():\\n    if not request.json or not 'message' in request.json:\\n        abort(400)\\n    sense.show_message(\\n        request.json[\\\"message\\\"],\\n        text_colour=[255, 255, 255])\\n    return jsonify({'success': True })\\n\\n@app.route('/api/led/clear', methods=['GET'])\\ndef set_led_clear():\\n    sense.clear()\\n    return jsonify({'success': True })\\n\\n@app.errorhandler(404)\\ndef not_found(error):\\n    return jsonify({'error': 'Not found'})\\n\\nif __name__ == '__main__':\\n    app.run(debug=True,host='0.0.0.0')\\n</code></pre>\\n<p>OK so everything is ready to build a nice Dashboard and show some sensor data, wirte some data on LED and also play a little bit with React. I prepared an Skeleton for my React project so in this way every time I want to build a new Dashboard I don’t need to repeat and waste time to create my skeleton. you can find my skeleton app on my Github account –> <a href=\\\"https://github.com/farminf/react-skeleton\\\">HERE</a></p>\\n<p>So basically, after cloning, you just need to do ‘npm install’ and after downloading all modules, for running it, ‘npm start’. After starting, you should be able to see an empty page (simple navigation and empty container) on <a href=\\\"http://localhost:8080\\\">http://localhost:8080</a>.</p>\\n<p>I’ve put some components in the skeleton which later you see why I am using them and basically I can use this skeleton project anytime I want to build a dashboard. Briefly, I explain what skeleton project has:</p>\\n<ol>\\n<li>npm package file including all dependencies and scripts</li>\\n<li>Webpack configuration file</li>\\n<li>Router configuration in config folder which in any dashboard is extendable</li>\\n<li>A service file using Axios for consuming Restful services in uitls folder</li>\\n<li>Containers folder including the main views</li>\\n<li>Components folder for all components (now there are some default wrappers and view containers)</li>\\n</ol>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 268.0365296803653%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAA2ABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH1VhoDOqdA4vGhQZUAP//EABoQAAIDAQEAAAAAAAAAAAAAAAABAhASITH/2gAIAQEAAQUCfDVSFUhKpCVSFUvVWEYRhH//xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAEDAQE/AQ//xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAECAQE/AQ//xAAXEAEBAQEAAAAAAAAAAAAAAAAAQUCR/9oACAEBAAY/AsVVev/EACAQAAEDBAIDAAAAAAAAAAAAAAEAEBEhMUGBUXGRofD/2gAIAQEAAT8hCU4QABrQuvttEC4lu2kC8QWuCE5LUJCKRpq0ghtch8l8iX//2gAMAwEAAgADAAAAEFDNPDPIPP/EABQRAQAAAAAAAAAAAAAAAAAAADD/2gAIAQMBAT8QD//EABQRAQAAAAAAAAAAAAAAAAAAADD/2gAIAQIBAT8QD//EACMQAQACAAUEAwEAAAAAAAAAAAEAERAhMUFRYYHB0ZGhsfD/2gAIAQEAAT8QPICtmVRK4qDYPM2HL+QDTm6+mCtC1WdSsVHthqDNFA+0wWQFb2QJdg7OCE0NNUnQXwwoVkrc+YXKjuPM/p7J/9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 1\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-76fb0.jpg 148w,\\n/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg 219w\\\"\\n        sizes=\\\"(max-width: 219px) 100vw, 219px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>So what do I want for my Dashboard? First thing I want a page just to show the current value of temperature, Humidity and Pressure. Then I want a page for showing them on the graph but not the historical one, I want real-time Dashboard. More, I want a page to play with the LED, so some buttons to change the color of LED and a form like element to send my string and show it on LED.</p>\\n<p>So before starting let’s see how I can design the architecture of all components. The good thing about React is, we just need to write our components (widgets in our case) and then use them in one view or even use them in multiple view. Also, it is OK to copy them from one dashboard to other. In case of the update on any of this widgets, React will update only that widget and nothing. Note: there is this weird combination of the XML syntax and JS in one file which after working with react it’ll get normal, believe me 🙂</p>\\n<p>before going to visualization part, let’s furnish our little service part which is the part we call the API. I prepare this with some functions and then inside each component I just import it and use the function that we need to call.\\n(I renamed the helper.js to SensehatHelper.js)</p>\\n<pre><code class=\\\"language-js\\\">var axiosAPI = require('./axiosAPI')\\n\\nvar helpers = {\\n  getAmbientValues: function() {\\n    return axiosAPI.get('/ambient').catch(function(err) {\\n      console.warn('Error in getAmbientValues: ', err)\\n    })\\n  },\\n  setLEDRGB: function(color) {\\n    return axiosAPI.get('/led/' + color).catch(function(err) {\\n      console.warn('Error in setLEDRGB: ', err)\\n    })\\n  },\\n  setLEDMessage: function(message) {\\n    return axiosAPI\\n      .post('/led', {\\n        message: message,\\n      })\\n      .catch(function(err) {\\n        console.warn('Error in setLEDRGB: ', err)\\n      })\\n  },\\n}\\n\\nmodule.exports = helpers\\n</code></pre>\\n<p>Ok, so I start implementing my router and then my navigation. In this way I always have my navigation on top and React is just updating the containers (views). I need 3 views, one for monitoring ( calling Ambient), one for controlling(Control) and one for charts (Chart). So I need to have something like this:</p>\\n<pre><code class=\\\"language-js\\\">var routes = (\\n  &#x3C;Router history={hashHistory}>\\n    &#x3C;Route path=\\\"/\\\" component={Main}>\\n      &#x3C;IndexRoute component={AmbientContainer} />\\n      &#x3C;Route path=\\\"ambient\\\" header=\\\"Ambient\\\" component={AmbientContainer} />\\n      &#x3C;Route path=\\\"control\\\" header=\\\"Control\\\" component={ControlContainer} />\\n      &#x3C;Route path=\\\"chart\\\" header=\\\"Chart\\\" component={ChartContainer} />\\n    &#x3C;/Route>\\n  &#x3C;/Router>\\n)\\n</code></pre>\\n<p>Then for navigation I need to modify the navbar file which is already inside component folder.(this component is included in main.js because it should not be reloaded based on the routes):</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar ReactRouter = require('react-router')\\nvar textcolorblack = require('../styles').textcolorblack\\nvar bloglink = require('../styles').bloglink\\nvar Link = ReactRouter.Link\\n\\nfunction Navbar() {\\n  return (\\n    &#x3C;nav className=\\\"navbar navbar-default\\\">\\n      &#x3C;div className=\\\"container-fluid\\\">\\n        &#x3C;div className=\\\"navbar-header\\\">\\n          &#x3C;button\\n            type=\\\"button\\\"\\n            className=\\\"navbar-toggle collapsed\\\"\\n            data-toggle=\\\"collapse\\\"\\n            data-target=\\\"#bs-example-navbar-collapse-1\\\"\\n            aria-expanded=\\\"false\\\"\\n          >\\n            &#x3C;span className=\\\"sr-only\\\">Toggle navigation&#x3C;/span>\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n          &#x3C;/button>\\n          &#x3C;p className=\\\"navbar-brand\\\" style={textcolorblack}>\\n            SenseHat Dashboard\\n          &#x3C;/p>\\n        &#x3C;/div>\\n        &#x3C;div\\n          id=\\\"bs-example-navbar-collapse-1\\\"\\n          className=\\\"collapse navbar-collapse\\\"\\n        >\\n          &#x3C;ul className=\\\"nav navbar-nav\\\">\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/\\\">\\n                Ambient&#x3C;span className=\\\"sr-only\\\">(current)&#x3C;/span>\\n              &#x3C;/Link>\\n            &#x3C;/li>\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/control\\\">Control&#x3C;/Link>\\n            &#x3C;/li>\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/chart\\\">Chart&#x3C;/Link>\\n            &#x3C;/li>\\n          &#x3C;/ul>\\n          &#x3C;ul className=\\\"nav navbar-nav navbar-right\\\">\\n            &#x3C;li>\\n              &#x3C;a\\n                style={bloglink}\\n                target=\\\"_blank\\\"\\n                href=\\\"https://iotdemos.wordpress.com\\\"\\n              >\\n                Blog\\n              &#x3C;/a>\\n            &#x3C;/li>\\n          &#x3C;/ul>\\n        &#x3C;/div>\\n      &#x3C;/div>\\n    &#x3C;/nav>\\n  )\\n}\\nmodule.exports = Navbar\\n</code></pre>\\n<p>Then I should create the containers related to my routes in the Containers folder. So I create AmbientContainer.js, ChartContainer.js and ControlContainer.js and also import it in my router.js:</p>\\n<pre><code class=\\\"language-js\\\">var AmbientContainer = require('../containers/AmbientContainer')\\nvar ControlContainer = require('../containers/ControlContainer')\\nvar ChartContainer = require('../containers/ChartContainer')\\n</code></pre>\\n<p>So inside each container I can include my component or components to show on each view. so for example I’ll add a component called “Ambient” inside my AmbientContainer and I’ll pass the the props related to each sensor to Ambient component (I get the value using a function in our helper, I do it in componentDidMount since it makes sure that the component is already rendered and then it updates the view ):</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar Ambient = require('../components/Ambient')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nvar AmbientContainer = React.createClass({\\n  getInitialState: function() {\\n    return {\\n      isLoading: true,\\n      temperature: 0,\\n      humidity: 0,\\n      pressure: 0,\\n    }\\n  },\\n  componentDidMount: function() {\\n    SensehatHelper.getAmbientValues().then(\\n      function(result) {\\n        this.setState({\\n          isLoading: false,\\n          temperature: result.data.temperature,\\n          humidity: result.data.humidity,\\n          pressure: result.data.pressure,\\n        })\\n      }.bind(this)\\n    )\\n  },\\n  render: function() {\\n    return (\\n      &#x3C;Ambient\\n        isLoading={this.state.isLoading}\\n        temperature={this.state.temperature}\\n        humidity={this.state.humidity}\\n        pressure={this.state.pressure}\\n      />\\n    )\\n  },\\n})\\n\\nmodule.exports = AmbientContainer\\n</code></pre>\\n<p>Then we make a file called “Ambient” inside the component folder and we receive the props that AmbientContainer sent to that. In Addition we pass these props to our sub modules which we want to create later show the visual value of sensor(We call them Monitor Widget</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar MonitorWidget = require('./MonitorWidget')\\nvar Widgetwrapper = require('./Widgetwrapper')\\nvar MainContainer = require('./MainContainer')\\n\\nfunction Ambient(props) {\\n  return (\\n    &#x3C;MainContainer>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Temperature\\\"\\n          panel_content={props.temperature}\\n          panel_icon=\\\"thermometer\\\"\\n          unit=\\\"°C\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Humidity\\\"\\n          panel_content={props.humidity}\\n          panel_icon=\\\"tint\\\"\\n          unit=\\\"%\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Pressure\\\"\\n          panel_content={props.pressure}\\n          panel_icon=\\\"tachometer\\\"\\n          unit=\\\"hPa\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n    &#x3C;/MainContainer>\\n  )\\n}\\n\\nmodule.exports = Ambient\\n</code></pre>\\n<p>You can see that there are also two other tags, MainContainer and Widgetwrapper. these two are already in skeleton project since we use them in all part of the dashboard. Basically these two are the bootstrap frames or container for our widget or any element we want to visualize. for example the Widgetwrapper is simple bootstrap div with exact size. like this:</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar PropTypes = React.PropTypes\\n\\nfunction WidgetWrapper(props) {\\n  return &#x3C;div className=\\\"col-sm-4 \\\">{props.children}&#x3C;/div>\\n}\\nmodule.exports = WidgetWrapper\\n</code></pre>\\n<p>Also, you can see that I have put three props in each MonitorWidget tag: name of the sensor, value which we get from container, unit of the value and also dedicated icon. I use the icon to make my dashboard a little bit nicer, so I like the \\\"Font Awesome\\\" library and I have used it before in Angular1 and also JS plain projects and now I’ll use it also in my React project.(the name of the icon is in their website) I have already put the dependency for Font Awesome in out package.json.\\nNext we gonna create out MonitorWidget file in the components and implement our widget using props. Remember to import Font Awesome to use it. Also, I have already put my CSS in the skeleton, in that I have provide a class for circle and other things that I use for visualization part.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar transparentBg = require('../styles').transparentBg\\nvar FontAwesome = require('react-fontawesome')\\n\\nfunction MonitorWidget(props) {\\n  var inverse = true\\n  return (\\n    &#x3C;div className=\\\"jumbotron col-sm-12 text-center\\\" style={transparentBg}>\\n      &#x3C;div className=\\\"circle\\\">\\n        &#x3C;p>\\n          &#x3C;FontAwesome name={props.panel_icon} size=\\\"4x\\\" />\\n          &#x3C;h2>\\n            {props.panel_content} {props.unit}\\n          &#x3C;/h2>\\n        &#x3C;/p>\\n      &#x3C;/div>\\n    &#x3C;/div>\\n  )\\n}\\n\\nmodule.exports = MonitorWidget\\n</code></pre>\\n<p>So my widget would be something like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 336px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 83.63095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd6VFFAUH//EABcQAAMBAAAAAAAAAAAAAAAAAAABITD/2gAIAQEAAQUCFcP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAACAQUAAAAAAAAAAAAAAAAAATERICFBYf/aAAgBAQABPyGRsuCIFRbt/9oADAMBAAIAAwAAABCsDwD/xAAWEQADAAAAAAAAAAAAAAAAAAARICH/2gAIAQMBAT8QgT//xAAWEQEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQIBAT8Qq4//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMUEQUf/aAAgBAQABPxANnXCEKCWqxi4uSDo64yg4N/CBdqZfDz//2Q=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 2\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-f7a23.jpg 148w,\\n/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a1f56.jpg 295w,\\n/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg 336w\\\"\\n        sizes=\\\"(max-width: 336px) 100vw, 336px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>and I have used same component for other 2 sensors and as you have already seen, I just passed different props to same component. so my Ambient page would be like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-96788.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 28.51851851851852%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB34FB/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQITH/2gAIAQEAAT8hhZZ//9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExcUH/2gAIAQEAAT8QDkBB1fIMMF9an//Z'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 3\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-f8fb9.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-e8976.jpg 148w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-63df2.jpg 295w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-f8fb9.jpg 590w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-85e3d.jpg 885w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-96788.jpg 1080w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>I do the same procedure for control, so I make a ControlContainer, and then inside that Control component and then I implement my widgets and include it in the control view. For coloring the LED, let’s put 4 buttons: Red, blue, green and one for clearing the LED and using API server, everytime we click on the button, we call the specific API depends on the button using the helper file.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nfunction SwitchOnOff(props) {\\n  handleClick = function() {\\n    console.log(props.button_label)\\n    SensehatHelper.setLEDRGB(props.button_label.toLowerCase())\\n  }\\n  return (\\n    &#x3C;button\\n      type=\\\"button\\\"\\n      className={props.button_type}\\n      onClick={this.handleClick}\\n    >\\n      {props.button_label}\\n    &#x3C;/button>\\n  )\\n}\\nmodule.exports = SwitchOnOff\\n</code></pre>\\n<p>Cool! I also build a component for sending a string to API, for showing on Sensehat LED and name this module InputWidget.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar styles = require('../styles')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nfunction InputWidget(props) {\\n  this.state = {\\n    inputValue: '',\\n  }\\n  updateInputValue = function(evt) {\\n    this.state.inputValue = evt.target.value\\n  }\\n  handleClick = function() {\\n    console.log(this.state.inputValue)\\n    SensehatHelper.setLEDMessage(this.state.inputValue)\\n  }\\n  return (\\n    &#x3C;div className=\\\"input-group\\\">\\n      &#x3C;input\\n        type=\\\"text\\\"\\n        className=\\\"form-control\\\"\\n        placeholder={props.placeholder}\\n        onChange={this.updateInputValue}\\n      />\\n      &#x3C;span className=\\\"input-group-btn\\\">\\n        &#x3C;button\\n          className=\\\"btn btn-default\\\"\\n          type=\\\"submit\\\"\\n          onClick={this.handleClick}\\n        >\\n          {props.button_name}\\n        &#x3C;/button>\\n      &#x3C;/span>\\n    &#x3C;/div>\\n  )\\n}\\nmodule.exports = InputWidget\\n</code></pre>\\n<p>Now I can build up my control view using these components:\\n(four button components with different props, one pure img tag and one Input Widget</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar transparentBg = require('../styles').transparentBg\\nvar MainContainer = require('./MainContainer')\\nvar PanelWrapper = require('./PanelWrapper')\\nvar ImageWrapper = require('./ImageWrapper')\\nvar SwitchOnOff = require('./SwitchOnOff')\\nvar sensehatImage = require('../images/sensehat2.png')\\nvar InputWidget = require('./InputWidget')\\n\\nvar Control = React.createClass({\\n  render: function() {\\n    return (\\n      &#x3C;MainContainer>\\n        &#x3C;PanelWrapper header=\\\"SenseHat LED Color\\\">\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Clear\\\"\\n            button_type=\\\"btn btn-lg btn-default btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Red\\\"\\n            button_type=\\\"btn btn-lg btn-danger btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Green\\\"\\n            button_type=\\\"btn btn-lg btn-success btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Blue\\\"\\n            button_type=\\\"btn btn-lg btn-primary btn-block\\\"\\n          />\\n        &#x3C;/PanelWrapper>\\n        &#x3C;ImageWrapper>\\n          &#x3C;img src={sensehatImage} className=\\\"img-responsive center-block\\\" />\\n        &#x3C;/ImageWrapper>\\n        &#x3C;PanelWrapper header=\\\"Send to LED\\\">\\n          &#x3C;InputWidget placeholder=\\\"write a message...\\\" button_name=\\\"Send\\\" />\\n        &#x3C;/PanelWrapper>\\n      &#x3C;/MainContainer>\\n    )\\n  },\\n})\\nmodule.exports = Control\\n</code></pre>\\n<p>My final control page would be something like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-96788.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 36.01851851851852%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHYgSwF/8QAGBABAQADAAAAAAAAAAAAAAAAAgABAxL/2gAIAQEAAQUC5dqCOL//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAAABwEAAAAAAAAAAAAAAAAAAQIQERIyof/aAAgBAQAGPwLfAdlS3//EABsQAAEEAwAAAAAAAAAAAAAAAAEAECExEUFR/9oACAEBAAE/ITNDB0lyU9pv/9oADAMBAAIAAwAAABD3z//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAwEBAAAAAAAAAAAAAAABABExIVH/2gAIAQEAAT8QZUoEBTc6MFURJ04zso8n/9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 4\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-f8fb9.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-e8976.jpg 148w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-63df2.jpg 295w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-f8fb9.jpg 590w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-85e3d.jpg 885w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-96788.jpg 1080w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>I arrive at the difficult point… live chart\\nI like D3 Library because it is very clean and very simple to use so I use D3 chart to make my chart view. I make a component and name it D3chartWidget. In this one I should update the chart every second so I need to call the API every second and add the value to an array which I show it on the chart:</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar LineChart = require('react-d3-basic').LineChart\\nvar core = require('react-d3-core')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nvar D3chartWidget = React.createClass({\\n  updateChart: function() {\\n    SensehatHelper.getAmbientValues().then(\\n      function(result) {\\n        if (this.props.sensor == 'temperature') {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              {\\n                sensor: result.data.temperature,\\n                date: new Date(),\\n              },\\n            ]),\\n          })\\n        } else if (this.props.sensor == 'humidity') {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              {\\n                sensor: result.data.humidity,\\n                date: new Date(),\\n              },\\n            ]),\\n          })\\n        } else {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              { sensor: result.data.pressure, date: new Date() },\\n            ]),\\n          })\\n        }\\n      }.bind(this)\\n    )\\n  },\\n  getRandomInt: function(min, max) {\\n    return Math.floor(Math.random() * (max - min + 1)) + min\\n  },\\n  getInitialState: function() {\\n    return {\\n      chartData: [],\\n    }\\n  },\\n  componentDidMount: function() {\\n    this.intervalId = setInterval(() => this.updateChart(), 1000)\\n    this.setState({ intervalId: this.intervalId })\\n  },\\n  componentWillUnmount: function() {\\n    clearInterval(this.state.intervalId)\\n  },\\n  render: function() {\\n    var width = 600\\n    var height = 300\\n    var margins = { left: 50, right: 20, top: 20, bottom: 60 }\\n    var title = 'Title'\\n    var parseDate = d3.time.format('%YM%m').parse\\n    xDomain = d3.extent(this.state.chartData, function(d) {\\n      return x(d)\\n    })\\n    xRange = [0, width - margins.left - margins.right]\\n    ;(xScale = 'time'), (xLabel = 'Time')\\n\\n    // chart series,\\n    // field: is what field your data want to be selected\\n    // name: the name of the field that display in legend\\n    // color: what color is the line\\n    chartSeries = [\\n      {\\n        field: 'sensor',\\n        name: this.props.sensor,\\n        color: this.props.color,\\n      },\\n    ]\\n    // your x accessor\\n    x = function(d) {\\n      return d.date\\n    }\\n\\n    return (\\n      &#x3C;LineChart\\n        margins={margins}\\n        title={title}\\n        data={this.state.chartData}\\n        width={width}\\n        height={height}\\n        chartSeries={chartSeries}\\n        x={x}\\n        xScale={xScale}\\n        xLabel={xLabel}\\n        xDomain={xDomain}\\n        xRange={xRange}\\n        showXGrid={true}\\n        showYGrid={false}\\n      />\\n    )\\n  },\\n})\\nmodule.exports = D3chartWidget\\n</code></pre>\\n<p>Then I will use this component in my container. The nice thing about React in this component is that I just can add a whole chart by adding just one line to the other view and maybe later I use it in another dashboard.</p>\\n<p>You can find the whole project <a href=\\\"https://github.com/farminf/sensehat-react\\\">HERE</a> in my GitHub page and feel free to contribute or if there is a bug please let me know.</p>\",\"frontmatter\":{\"date\":\"April 03, 2017\",\"path\":\"/sensehat-react\",\"title\":\"Building a Simple Dashboard for Raspberry Pi SenseHat using Python, React and Bootstrap\"}}},\"pathContext\":{}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---sensehat-react-a90460329a0a5b9d170b.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>These days the comparison between React and Angular2 is a very hot topic. I’ve seen some people build the dashboards on top of both and compare the features and basically the do pros and cons. So, I decided to the same thing for my SenseHat and see the result.</p>\\n<p>I started to implement very light and easy API server using Python on my Raspberry just to respond the calls from dashboard. It doesn’t have any database or any historic data feature, It just gives the current value of Temperature, Humidity and pressure sensor of SenseHat and additionally it accept post for showing a text on SenseHat LED or make the LED colorful (Red, Green and Blue). I did the API part using flask , a python library which is awesome. For configuring and installing it and also getting familiar with flask, I found <a href=\\\"https://blog.miguelgrinberg.com/post/designing-a-restful-api-with-python-and-flask\\\">this beautiful tutorial</a> that explains everything and helped me a lot.</p>\\n<p>I just implemented one file and you can find it on my GitHub <a href=\\\"https://github.com/farminf/sensehat-api-python\\\">HERE</a></p>\\n<p>As you can see I have implemented 3 functions to interact with my Dashboard (2 Gets and 1 Post).</p>\\n<pre><code class=\\\"language-python\\\">#!flask/bin/python\\nimport os\\nfrom flask import Flask , jsonify , request\\nfrom sense_hat import SenseHat\\nfrom flask_cors import CORS, cross_origin\\n\\n\\n\\napp = Flask(__name__)\\nCORS(app)\\n\\nsense = SenseHat()\\nsense.clear()\\n\\n\\n# get CPU temperature\\ndef get_cpu_temp():\\n  res = os.popen(\\\"vcgencmd measure_temp\\\").readline()\\n  t = float(res.replace(\\\"temp=\\\",\\\"\\\").replace(\\\"'C\\\\n\\\",\\\"\\\"))\\n  return(t)\\n\\n@app.route('/api')\\ndef index():\\n    return \\\"try with '/ambient' \\\"\\n\\n@app.route('/api/ambient', methods=['GET', 'OPTIONS'])\\ndef get_ambient_params():\\n    t1 = sense.get_temperature_from_humidity()\\n    t2 = sense.get_temperature_from_pressure()\\n    t_cpu = get_cpu_temp()\\n    t = (t1+t2)/2\\n    temperature = t - ((t_cpu-t)/1.5)\\n\\n    humidity = sense.get_humidity()\\n\\n    pressure = sense.get_pressure()\\n\\n    return jsonify({\\n        'temperature': temperature ,\\n        'humidity': humidity ,\\n        'pressure': pressure})\\n\\n@app.route('/api/led/&#x3C;rgb>', methods=['GET'])\\ndef set_led_color(rgb):\\n    if rgb == 'red':\\n        X = [255, 0, 0]  # Red\\n    elif rgb == 'green':\\n        X = [0, 255, 0]  # green\\n    elif rgb == 'blue':\\n        X = [0, 0, 255]  # blue\\n    color = [\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X,\\n        X, X, X, X, X, X, X, X\\n        ]\\n    sense.set_pixels(color)\\n    return jsonify({'success': True })\\n\\n@app.route('/api/led', methods=['POST'])\\ndef set_led_message():\\n    if not request.json or not 'message' in request.json:\\n        abort(400)\\n    sense.show_message(\\n        request.json[\\\"message\\\"],\\n        text_colour=[255, 255, 255])\\n    return jsonify({'success': True })\\n\\n@app.route('/api/led/clear', methods=['GET'])\\ndef set_led_clear():\\n    sense.clear()\\n    return jsonify({'success': True })\\n\\n@app.errorhandler(404)\\ndef not_found(error):\\n    return jsonify({'error': 'Not found'})\\n\\nif __name__ == '__main__':\\n    app.run(debug=True,host='0.0.0.0')\\n</code></pre>\\n<p>OK so everything is ready to build a nice Dashboard and show some sensor data, wirte some data on LED and also play a little bit with React. I prepared an Skeleton for my React project so in this way every time I want to build a new Dashboard I don’t need to repeat and waste time to create my skeleton. you can find my skeleton app on my Github account –> <a href=\\\"https://github.com/farminf/react-skeleton\\\">HERE</a></p>\\n<p>So basically, after cloning, you just need to do ‘npm install’ and after downloading all modules, for running it, ‘npm start’. After starting, you should be able to see an empty page (simple navigation and empty container) on <a href=\\\"http://localhost:8080\\\">http://localhost:8080</a>.</p>\\n<p>I’ve put some components in the skeleton which later you see why I am using them and basically I can use this skeleton project anytime I want to build a dashboard. Briefly, I explain what skeleton project has:</p>\\n<ol>\\n<li>npm package file including all dependencies and scripts</li>\\n<li>Webpack configuration file</li>\\n<li>Router configuration in config folder which in any dashboard is extendable</li>\\n<li>A service file using Axios for consuming Restful services in uitls folder</li>\\n<li>Containers folder including the main views</li>\\n<li>Components folder for all components (now there are some default wrappers and view containers)</li>\\n</ol>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 268.0365296803653%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAA2ABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH1VhoDOqdA4vGhQZUAP//EABoQAAIDAQEAAAAAAAAAAAAAAAABAhASITH/2gAIAQEAAQUCfDVSFUhKpCVSFUvVWEYRhH//xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAEDAQE/AQ//xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAECAQE/AQ//xAAXEAEBAQEAAAAAAAAAAAAAAAAAQUCR/9oACAEBAAY/AsVVev/EACAQAAEDBAIDAAAAAAAAAAAAAAEAEBEhMUGBUXGRofD/2gAIAQEAAT8hCU4QABrQuvttEC4lu2kC8QWuCE5LUJCKRpq0ghtch8l8iX//2gAMAwEAAgADAAAAEFDNPDPIPP/EABQRAQAAAAAAAAAAAAAAAAAAADD/2gAIAQMBAT8QD//EABQRAQAAAAAAAAAAAAAAAAAAADD/2gAIAQIBAT8QD//EACMQAQACAAUEAwEAAAAAAAAAAAEAERAhMUFRYYHB0ZGhsfD/2gAIAQEAAT8QPICtmVRK4qDYPM2HL+QDTm6+mCtC1WdSsVHthqDNFA+0wWQFb2QJdg7OCE0NNUnQXwwoVkrc+YXKjuPM/p7J/9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 1\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-76fb0.jpg 148w,\\n/static/sensehat-react-1-f550b4aeb67b316b9219c265c8a30805-f5b76.jpg 219w\\\"\\n        sizes=\\\"(max-width: 219px) 100vw, 219px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>So what do I want for my Dashboard? First thing I want a page just to show the current value of temperature, Humidity and Pressure. Then I want a page for showing them on the graph but not the historical one, I want real-time Dashboard. More, I want a page to play with the LED, so some buttons to change the color of LED and a form like element to send my string and show it on LED.</p>\\n<p>So before starting let’s see how I can design the architecture of all components. The good thing about React is, we just need to write our components (widgets in our case) and then use them in one view or even use them in multiple view. Also, it is OK to copy them from one dashboard to other. In case of the update on any of this widgets, React will update only that widget and nothing. Note: there is this weird combination of the XML syntax and JS in one file which after working with react it’ll get normal, believe me 🙂</p>\\n<p>before going to visualization part, let’s furnish our little service part which is the part we call the API. I prepare this with some functions and then inside each component I just import it and use the function that we need to call.\\n(I renamed the helper.js to SensehatHelper.js)</p>\\n<pre><code class=\\\"language-js\\\">var axiosAPI = require('./axiosAPI')\\n\\nvar helpers = {\\n  getAmbientValues: function() {\\n    return axiosAPI.get('/ambient').catch(function(err) {\\n      console.warn('Error in getAmbientValues: ', err)\\n    })\\n  },\\n  setLEDRGB: function(color) {\\n    return axiosAPI.get('/led/' + color).catch(function(err) {\\n      console.warn('Error in setLEDRGB: ', err)\\n    })\\n  },\\n  setLEDMessage: function(message) {\\n    return axiosAPI\\n      .post('/led', {\\n        message: message,\\n      })\\n      .catch(function(err) {\\n        console.warn('Error in setLEDRGB: ', err)\\n      })\\n  },\\n}\\n\\nmodule.exports = helpers\\n</code></pre>\\n<p>Ok, so I start implementing my router and then my navigation. In this way I always have my navigation on top and React is just updating the containers (views). I need 3 views, one for monitoring ( calling Ambient), one for controlling(Control) and one for charts (Chart). So I need to have something like this:</p>\\n<pre><code class=\\\"language-js\\\">var routes = (\\n  &#x3C;Router history={hashHistory}>\\n    &#x3C;Route path=\\\"/\\\" component={Main}>\\n      &#x3C;IndexRoute component={AmbientContainer} />\\n      &#x3C;Route path=\\\"ambient\\\" header=\\\"Ambient\\\" component={AmbientContainer} />\\n      &#x3C;Route path=\\\"control\\\" header=\\\"Control\\\" component={ControlContainer} />\\n      &#x3C;Route path=\\\"chart\\\" header=\\\"Chart\\\" component={ChartContainer} />\\n    &#x3C;/Route>\\n  &#x3C;/Router>\\n)\\n</code></pre>\\n<p>Then for navigation I need to modify the navbar file which is already inside component folder.(this component is included in main.js because it should not be reloaded based on the routes):</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar ReactRouter = require('react-router')\\nvar textcolorblack = require('../styles').textcolorblack\\nvar bloglink = require('../styles').bloglink\\nvar Link = ReactRouter.Link\\n\\nfunction Navbar() {\\n  return (\\n    &#x3C;nav className=\\\"navbar navbar-default\\\">\\n      &#x3C;div className=\\\"container-fluid\\\">\\n        &#x3C;div className=\\\"navbar-header\\\">\\n          &#x3C;button\\n            type=\\\"button\\\"\\n            className=\\\"navbar-toggle collapsed\\\"\\n            data-toggle=\\\"collapse\\\"\\n            data-target=\\\"#bs-example-navbar-collapse-1\\\"\\n            aria-expanded=\\\"false\\\"\\n          >\\n            &#x3C;span className=\\\"sr-only\\\">Toggle navigation&#x3C;/span>\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n            &#x3C;span className=\\\"icon-bar\\\" />\\n          &#x3C;/button>\\n          &#x3C;p className=\\\"navbar-brand\\\" style={textcolorblack}>\\n            SenseHat Dashboard\\n          &#x3C;/p>\\n        &#x3C;/div>\\n        &#x3C;div\\n          id=\\\"bs-example-navbar-collapse-1\\\"\\n          className=\\\"collapse navbar-collapse\\\"\\n        >\\n          &#x3C;ul className=\\\"nav navbar-nav\\\">\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/\\\">\\n                Ambient&#x3C;span className=\\\"sr-only\\\">(current)&#x3C;/span>\\n              &#x3C;/Link>\\n            &#x3C;/li>\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/control\\\">Control&#x3C;/Link>\\n            &#x3C;/li>\\n            &#x3C;li>\\n              &#x3C;Link to=\\\"/chart\\\">Chart&#x3C;/Link>\\n            &#x3C;/li>\\n          &#x3C;/ul>\\n          &#x3C;ul className=\\\"nav navbar-nav navbar-right\\\">\\n            &#x3C;li>\\n              &#x3C;a\\n                style={bloglink}\\n                target=\\\"_blank\\\"\\n                href=\\\"https://iotdemos.wordpress.com\\\"\\n              >\\n                Blog\\n              &#x3C;/a>\\n            &#x3C;/li>\\n          &#x3C;/ul>\\n        &#x3C;/div>\\n      &#x3C;/div>\\n    &#x3C;/nav>\\n  )\\n}\\nmodule.exports = Navbar\\n</code></pre>\\n<p>Then I should create the containers related to my routes in the Containers folder. So I create AmbientContainer.js, ChartContainer.js and ControlContainer.js and also import it in my router.js:</p>\\n<pre><code class=\\\"language-js\\\">var AmbientContainer = require('../containers/AmbientContainer')\\nvar ControlContainer = require('../containers/ControlContainer')\\nvar ChartContainer = require('../containers/ChartContainer')\\n</code></pre>\\n<p>So inside each container I can include my component or components to show on each view. so for example I’ll add a component called “Ambient” inside my AmbientContainer and I’ll pass the the props related to each sensor to Ambient component (I get the value using a function in our helper, I do it in componentDidMount since it makes sure that the component is already rendered and then it updates the view ):</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar Ambient = require('../components/Ambient')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nvar AmbientContainer = React.createClass({\\n  getInitialState: function() {\\n    return {\\n      isLoading: true,\\n      temperature: 0,\\n      humidity: 0,\\n      pressure: 0,\\n    }\\n  },\\n  componentDidMount: function() {\\n    SensehatHelper.getAmbientValues().then(\\n      function(result) {\\n        this.setState({\\n          isLoading: false,\\n          temperature: result.data.temperature,\\n          humidity: result.data.humidity,\\n          pressure: result.data.pressure,\\n        })\\n      }.bind(this)\\n    )\\n  },\\n  render: function() {\\n    return (\\n      &#x3C;Ambient\\n        isLoading={this.state.isLoading}\\n        temperature={this.state.temperature}\\n        humidity={this.state.humidity}\\n        pressure={this.state.pressure}\\n      />\\n    )\\n  },\\n})\\n\\nmodule.exports = AmbientContainer\\n</code></pre>\\n<p>Then we make a file called “Ambient” inside the component folder and we receive the props that AmbientContainer sent to that. In Addition we pass these props to our sub modules which we want to create later show the visual value of sensor(We call them Monitor Widget</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar MonitorWidget = require('./MonitorWidget')\\nvar Widgetwrapper = require('./Widgetwrapper')\\nvar MainContainer = require('./MainContainer')\\n\\nfunction Ambient(props) {\\n  return (\\n    &#x3C;MainContainer>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Temperature\\\"\\n          panel_content={props.temperature}\\n          panel_icon=\\\"thermometer\\\"\\n          unit=\\\"°C\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Humidity\\\"\\n          panel_content={props.humidity}\\n          panel_icon=\\\"tint\\\"\\n          unit=\\\"%\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n      &#x3C;Widgetwrapper>\\n        &#x3C;MonitorWidget\\n          panel_tile=\\\"Pressure\\\"\\n          panel_content={props.pressure}\\n          panel_icon=\\\"tachometer\\\"\\n          unit=\\\"hPa\\\"\\n        />\\n      &#x3C;/Widgetwrapper>\\n    &#x3C;/MainContainer>\\n  )\\n}\\n\\nmodule.exports = Ambient\\n</code></pre>\\n<p>You can see that there are also two other tags, MainContainer and Widgetwrapper. these two are already in skeleton project since we use them in all part of the dashboard. Basically these two are the bootstrap frames or container for our widget or any element we want to visualize. for example the Widgetwrapper is simple bootstrap div with exact size. like this:</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar PropTypes = React.PropTypes\\n\\nfunction WidgetWrapper(props) {\\n  return &#x3C;div className=\\\"col-sm-4 \\\">{props.children}&#x3C;/div>\\n}\\nmodule.exports = WidgetWrapper\\n</code></pre>\\n<p>Also, you can see that I have put three props in each MonitorWidget tag: name of the sensor, value which we get from container, unit of the value and also dedicated icon. I use the icon to make my dashboard a little bit nicer, so I like the \\\"Font Awesome\\\" library and I have used it before in Angular1 and also JS plain projects and now I’ll use it also in my React project.(the name of the icon is in their website) I have already put the dependency for Font Awesome in out package.json.\\nNext we gonna create out MonitorWidget file in the components and implement our widget using props. Remember to import Font Awesome to use it. Also, I have already put my CSS in the skeleton, in that I have provide a class for circle and other things that I use for visualization part.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar transparentBg = require('../styles').transparentBg\\nvar FontAwesome = require('react-fontawesome')\\n\\nfunction MonitorWidget(props) {\\n  var inverse = true\\n  return (\\n    &#x3C;div className=\\\"jumbotron col-sm-12 text-center\\\" style={transparentBg}>\\n      &#x3C;div className=\\\"circle\\\">\\n        &#x3C;p>\\n          &#x3C;FontAwesome name={props.panel_icon} size=\\\"4x\\\" />\\n          &#x3C;h2>\\n            {props.panel_content} {props.unit}\\n          &#x3C;/h2>\\n        &#x3C;/p>\\n      &#x3C;/div>\\n    &#x3C;/div>\\n  )\\n}\\n\\nmodule.exports = MonitorWidget\\n</code></pre>\\n<p>So my widget would be something like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 336px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 83.63095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd6VFFAUH//EABcQAAMBAAAAAAAAAAAAAAAAAAABITD/2gAIAQEAAQUCFcP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAACAQUAAAAAAAAAAAAAAAAAATERICFBYf/aAAgBAQABPyGRsuCIFRbt/9oADAMBAAIAAwAAABCsDwD/xAAWEQADAAAAAAAAAAAAAAAAAAARICH/2gAIAQMBAT8QgT//xAAWEQEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQIBAT8Qq4//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMUEQUf/aAAgBAQABPxANnXCEKCWqxi4uSDo64yg4N/CBdqZfDz//2Q=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 2\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-f7a23.jpg 148w,\\n/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a1f56.jpg 295w,\\n/static/sensehat-react-2-8d52888cf54dded7080972a4fc0eb970-a10ee.jpg 336w\\\"\\n        sizes=\\\"(max-width: 336px) 100vw, 336px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>and I have used same component for other 2 sensors and as you have already seen, I just passed different props to same component. so my Ambient page would be like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-96788.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 28.51851851851852%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB34FB/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQITH/2gAIAQEAAT8hhZZ//9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExcUH/2gAIAQEAAT8QDkBB1fIMMF9an//Z'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 3\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-f8fb9.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-e8976.jpg 148w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-63df2.jpg 295w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-f8fb9.jpg 590w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-85e3d.jpg 885w,\\n/static/sensehat-react-3-fc37905851ee090b16d73f1bd19ceedf-96788.jpg 1080w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>I do the same procedure for control, so I make a ControlContainer, and then inside that Control component and then I implement my widgets and include it in the control view. For coloring the LED, let’s put 4 buttons: Red, blue, green and one for clearing the LED and using API server, everytime we click on the button, we call the specific API depends on the button using the helper file.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nfunction SwitchOnOff(props) {\\n  handleClick = function() {\\n    console.log(props.button_label)\\n    SensehatHelper.setLEDRGB(props.button_label.toLowerCase())\\n  }\\n  return (\\n    &#x3C;button\\n      type=\\\"button\\\"\\n      className={props.button_type}\\n      onClick={this.handleClick}\\n    >\\n      {props.button_label}\\n    &#x3C;/button>\\n  )\\n}\\nmodule.exports = SwitchOnOff\\n</code></pre>\\n<p>Cool! I also build a component for sending a string to API, for showing on Sensehat LED and name this module InputWidget.</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar styles = require('../styles')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nfunction InputWidget(props) {\\n  this.state = {\\n    inputValue: '',\\n  }\\n  updateInputValue = function(evt) {\\n    this.state.inputValue = evt.target.value\\n  }\\n  handleClick = function() {\\n    console.log(this.state.inputValue)\\n    SensehatHelper.setLEDMessage(this.state.inputValue)\\n  }\\n  return (\\n    &#x3C;div className=\\\"input-group\\\">\\n      &#x3C;input\\n        type=\\\"text\\\"\\n        className=\\\"form-control\\\"\\n        placeholder={props.placeholder}\\n        onChange={this.updateInputValue}\\n      />\\n      &#x3C;span className=\\\"input-group-btn\\\">\\n        &#x3C;button\\n          className=\\\"btn btn-default\\\"\\n          type=\\\"submit\\\"\\n          onClick={this.handleClick}\\n        >\\n          {props.button_name}\\n        &#x3C;/button>\\n      &#x3C;/span>\\n    &#x3C;/div>\\n  )\\n}\\nmodule.exports = InputWidget\\n</code></pre>\\n<p>Now I can build up my control view using these components:\\n(four button components with different props, one pure img tag and one Input Widget</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar transparentBg = require('../styles').transparentBg\\nvar MainContainer = require('./MainContainer')\\nvar PanelWrapper = require('./PanelWrapper')\\nvar ImageWrapper = require('./ImageWrapper')\\nvar SwitchOnOff = require('./SwitchOnOff')\\nvar sensehatImage = require('../images/sensehat2.png')\\nvar InputWidget = require('./InputWidget')\\n\\nvar Control = React.createClass({\\n  render: function() {\\n    return (\\n      &#x3C;MainContainer>\\n        &#x3C;PanelWrapper header=\\\"SenseHat LED Color\\\">\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Clear\\\"\\n            button_type=\\\"btn btn-lg btn-default btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Red\\\"\\n            button_type=\\\"btn btn-lg btn-danger btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Green\\\"\\n            button_type=\\\"btn btn-lg btn-success btn-block\\\"\\n          />\\n          &#x3C;SwitchOnOff\\n            button_label=\\\"Blue\\\"\\n            button_type=\\\"btn btn-lg btn-primary btn-block\\\"\\n          />\\n        &#x3C;/PanelWrapper>\\n        &#x3C;ImageWrapper>\\n          &#x3C;img src={sensehatImage} className=\\\"img-responsive center-block\\\" />\\n        &#x3C;/ImageWrapper>\\n        &#x3C;PanelWrapper header=\\\"Send to LED\\\">\\n          &#x3C;InputWidget placeholder=\\\"write a message...\\\" button_name=\\\"Send\\\" />\\n        &#x3C;/PanelWrapper>\\n      &#x3C;/MainContainer>\\n    )\\n  },\\n})\\nmodule.exports = Control\\n</code></pre>\\n<p>My final control page would be something like this:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-96788.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 36.01851851851852%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHYgSwF/8QAGBABAQADAAAAAAAAAAAAAAAAAgABAxL/2gAIAQEAAQUC5dqCOL//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAAABwEAAAAAAAAAAAAAAAAAAQIQERIyof/aAAgBAQAGPwLfAdlS3//EABsQAAEEAwAAAAAAAAAAAAAAAAEAECExEUFR/9oACAEBAAE/ITNDB0lyU9pv/9oADAMBAAIAAwAAABD3z//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAwEBAAAAAAAAAAAAAAABABExIVH/2gAIAQEAAT8QZUoEBTc6MFURJ04zso8n/9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"sensehat react 4\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-f8fb9.jpg\\\"\\n        srcset=\\\"/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-e8976.jpg 148w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-63df2.jpg 295w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-f8fb9.jpg 590w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-85e3d.jpg 885w,\\n/static/sensehat-react-4-25b3725b3274447f50a64aedef49d7ca-96788.jpg 1080w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>I arrive at the difficult point… live chart\\nI like D3 Library because it is very clean and very simple to use so I use D3 chart to make my chart view. I make a component and name it D3chartWidget. In this one I should update the chart every second so I need to call the API every second and add the value to an array which I show it on the chart:</p>\\n<pre><code class=\\\"language-js\\\">var React = require('react')\\nvar LineChart = require('react-d3-basic').LineChart\\nvar core = require('react-d3-core')\\nvar SensehatHelper = require('../utils/SensehatHelper')\\n\\nvar D3chartWidget = React.createClass({\\n  updateChart: function() {\\n    SensehatHelper.getAmbientValues().then(\\n      function(result) {\\n        if (this.props.sensor == 'temperature') {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              {\\n                sensor: result.data.temperature,\\n                date: new Date(),\\n              },\\n            ]),\\n          })\\n        } else if (this.props.sensor == 'humidity') {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              {\\n                sensor: result.data.humidity,\\n                date: new Date(),\\n              },\\n            ]),\\n          })\\n        } else {\\n          this.setState({\\n            chartData: this.state.chartData.concat([\\n              { sensor: result.data.pressure, date: new Date() },\\n            ]),\\n          })\\n        }\\n      }.bind(this)\\n    )\\n  },\\n  getRandomInt: function(min, max) {\\n    return Math.floor(Math.random() * (max - min + 1)) + min\\n  },\\n  getInitialState: function() {\\n    return {\\n      chartData: [],\\n    }\\n  },\\n  componentDidMount: function() {\\n    this.intervalId = setInterval(() => this.updateChart(), 1000)\\n    this.setState({ intervalId: this.intervalId })\\n  },\\n  componentWillUnmount: function() {\\n    clearInterval(this.state.intervalId)\\n  },\\n  render: function() {\\n    var width = 600\\n    var height = 300\\n    var margins = { left: 50, right: 20, top: 20, bottom: 60 }\\n    var title = 'Title'\\n    var parseDate = d3.time.format('%YM%m').parse\\n    xDomain = d3.extent(this.state.chartData, function(d) {\\n      return x(d)\\n    })\\n    xRange = [0, width - margins.left - margins.right]\\n    ;(xScale = 'time'), (xLabel = 'Time')\\n\\n    // chart series,\\n    // field: is what field your data want to be selected\\n    // name: the name of the field that display in legend\\n    // color: what color is the line\\n    chartSeries = [\\n      {\\n        field: 'sensor',\\n        name: this.props.sensor,\\n        color: this.props.color,\\n      },\\n    ]\\n    // your x accessor\\n    x = function(d) {\\n      return d.date\\n    }\\n\\n    return (\\n      &#x3C;LineChart\\n        margins={margins}\\n        title={title}\\n        data={this.state.chartData}\\n        width={width}\\n        height={height}\\n        chartSeries={chartSeries}\\n        x={x}\\n        xScale={xScale}\\n        xLabel={xLabel}\\n        xDomain={xDomain}\\n        xRange={xRange}\\n        showXGrid={true}\\n        showYGrid={false}\\n      />\\n    )\\n  },\\n})\\nmodule.exports = D3chartWidget\\n</code></pre>\\n<p>Then I will use this component in my container. The nice thing about React in this component is that I just can add a whole chart by adding just one line to the other view and maybe later I use it in another dashboard.</p>\\n<p>You can find the whole project <a href=\\\"https://github.com/farminf/sensehat-react\\\">HERE</a> in my GitHub page and feel free to contribute or if there is a bug please let me know.</p>\",\"frontmatter\":{\"date\":\"April 03, 2017\",\"path\":\"/sensehat-react\",\"title\":\"Building a Simple Dashboard for Raspberry Pi SenseHat using Python, React and Bootstrap\"}}},\"pathContext\":{}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/sensehat-react.json\n// module id = 344\n// module chunks = 94803894866459"],"sourceRoot":""}